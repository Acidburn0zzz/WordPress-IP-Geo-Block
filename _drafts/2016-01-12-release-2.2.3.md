---
layout: post
title: "2.2.3 Release Note"
date: 2016-01-12 09:00:00
categories: changelog
published: true
---

In WordPress 4.4 and later, `system.multicall` [XML-RPC callback is disabled]
[Core#34336] since [Sucuri][Sucuri] had discovered [brute force amplification 
attacks][XMLRPC-Amp] using this callback which can attempt thousands of 
authentification only by a single HTTP request. Thanks to the core team, we 
don't need to worry about hacks by this type of attacks. But still need to 
take care of the side of [DoS attack][DoS-Attack] that causes exhausting of 
resources.

<!--more-->

### XML-RPC system.multicall ###

Since the core team wants to make WordPress be compliant to the [specification 
of XML-RPC][XMLRPC-SPEC], the core class processes all the methods in the 
`system.multicall`.

For example, if 10 methods in `system.multicall` require 10 times of 
authentication, and if the first one fails, the WordPress core class is smart 
to make all the subsequent methods fail, but still responds to each as follows:

{% highlight xml %}
<?xml version="1.0" encoding="UTF-8"?>
<methodResponse>
  <params>
    <param>
      <value>
        <array>
          <data>
            <value>
              <struct>
                <member>
                  <name>faultCode</name>
                  <value>
                    <int>403</int>
                  </value>
                </member>
                <member>
                  <name>faultString</name>
                  <value>
                    <string>Incorrect username or password.</string>
                  </value>
                </member>
              </struct>
            </value>
            <!-- Repeated 9 times same as the above fault instance here -->
          </data>
        </array>
      </value>
    </param>
  </params>
</methodResponse>
{% endhighlight %}

This behavior is the same even if you use [Disable XML-RPC][DIS-XMLRPC] plugin 
or add the following code into your `functions.php`.

{% highlight php %}
add_filter( 'xmlrpc_enabled', '__return_false' );
{% endhighlight %}

Definitely, we don't need to be compliant against the attackers. So from this 
release, [IP Geo Block][IP-Geo-Block] immidiately returns the [status code]
[Status-Code] when the authentication fails so as not to spend the resources.

<div class="alert alert-info">
  <strong>Note:</strong>
  If the authentication of the corresponded method in 
  <code>system.multicall</code> succeeds, it'll be processed successfully.
  This behavior is the same as the core class. On the other hand, if it fails, 
  this plugin counts up the "<strong>number of login fails</strong>" with the 
  corresponded IP address. If it reaches to the "<strong>Maximum number of 
  login attempts</strong>", then this plugin will block any requests to the 
  back end from that IP address.
</div>

### XML-RPC "Completely close" ###

![system.multicall in Logs]({{ '/img/2016-02/LogXML-RPC.png' | prepend: site.baseurl }}
 "system.multicall in Logs"
)

### Changing the "Maximum number of login attempts" ###

### Graph of "Blocked per day" ###

| Left-Aligned  | Center Aligned  | Right Aligned |
|:--------------|:---------------:|--------------:|
| col 3 is      | some wordy text |         $1600 |
| col 2 is      | centered        |           $12 |
| zebra stripes | are neat        |            $1 |

<div class="table-responsive">
	<cite></cite>
	<table class="table">
		<thead>
			<tr>
				<th class="text-right">title1</th>
				<th class="text-right">title2</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="text-right">content1</td>
				<td class="text-right">content2</td>
			</tr>
		</tbody>
		<caption>caption</caption>
	</table>
</div>

{% comment %} http://www.emoji-cheat-sheet.com/ {% endcomment %}
<span class="emoji">
![emoji](https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png)
</span>

[IP-Geo-Block]: https://wordpress.org/plugins/ip-geo-block/ "WordPress › IP Geo Block « WordPress Plugins"
[Sucuri]:       https://blog.sucuri.net/ "Sucuri Blog - Website Security News"
[Core#34336]:   https://core.trac.wordpress.org/ticket/34336 "#34336 (Disable XML-RPC system.multicall authenticated requests on the first auth failure) – WordPress Trac"
[XMLRPC-Amp]:   https://blog.sucuri.net/2015/10/brute-force-amplification-attacks-against-wordpress-xmlrpc.html "Brute Force Amplification Attacks Against WordPress XMLRPC - Sucuri Blog"
[DoS-Attack]:   https://en.wikipedia.org/wiki/Denial-of-service_attack "Denial-of-service attack - Wikipedia, the free encyclopedia"
[XMLRPC-SPEC]:  http://xmlrpc.scripting.com/spec.html "XML-RPC Specification"
[DIS-XMLRPC]:   https://wordpress.org/plugins/disable-xml-rpc/ "WordPress › Disable XML-RPC « WordPress Plugins"
[Status-Code]:  {{ '/codex/customizing-the-response.html' | prepend: site.baseurl }} "Customizing the response | IP Geo Block"
[WP-ZEP]:       {{ '/article/how-wpzep-works.html' | prepend: site.baseurl }} "How does WP-ZEP prevent zero-day attack?"
