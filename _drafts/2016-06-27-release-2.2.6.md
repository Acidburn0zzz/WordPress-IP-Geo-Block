---
layout: post
title: "2.2.6 Release Note"
date: 2016-06-17 09:00:00
categories: changelog
published: true
script: []
inline:
---

<!--more-->

### Export CSV log file ###

![Export CSV log file]({{ '/img/2016-06/ExportCSV.png' | prepend: site.baseurl }}
 "Export CSV log file"
)

| Column        | Sample                                     |
|:--------------|:-------------------------------------------|
| Date/Time     | 2016-06-19 14:28:02                        |
| IP address    | 182.22.72.251                              |
| Country code  | JP                                         |
| Target        | admin                                      |
| Result        | wp-zep                                     |
| Requested URI | POST[80]:/wp-admin/admin-ajax.php          |
| User agent    | Mozilla/5.0 (Windows; U; Windows NT 5.1;)  |
| HTTP headers  | HTTP_X_FORWARDED_FOR=182.22.72.251         |
| $_POST data   | action=revslider_ajax_action,client_action |

### A new filter hook ###

A new filter hook `ip-geo-block-record-log` is added.

{% highlight ruby startinline %}
/**
 * Example 18: Usage of 'ip-geo-block-record-log'
 * Use case: Prevent recording logs when it requested from own country
 *
 * @param  int   $record   0:none 1:blocked 2:passed 3:unauth 4:auth 5:all
 * @param  array $request
 *  'ip'       => string   ip address
 *  'auth'     => int      authenticated or not
 *  'code'     => string   country code
 *  'time'     => unsinged processing time
 *  'provider' => string   IP geolocation service provider
 *  'result'   => string   'passed' or the reason of blocking
 * @return int   $record or 0
 */
function my_record_log( $record, $request ) {
    /* if request is from my country and passed then no record */
    if ( 'JP' === $request['code'] && 'passed' === $request['result'] )
        $record = 0;

    return $record;
}

add_filter( 'ip-geo-block-record-log', 'my_record_log', 10, 2 );
{% endhighlight %}

[IP-Geo-Block]: https://wordpress.org/plugins/ip-geo-block/ "WordPress › IP Geo Block « WordPress Plugins"
[WP-ZEP]: {{ '/article/how-wpzep-works.html' | prepend: site.baseurl }} "How does WP-ZEP prevent zero-day attack?"
